import{a as ee}from"./chunk-36HXAHSU.js";import{b as te,c as ie,d as ne,e as re}from"./chunk-TRWJ6ULH.js";import{a as j}from"./chunk-RI74FA6F.js";import{b as D,c as m,e as G,f as z,i as W,k as $,l as O,m as B,n as K,o as Z,p as H,q as J,r as Q,s as X,t as Y}from"./chunk-C6TDYET4.js";import{a as q,b as V}from"./chunk-AGWVRW6Z.js";import{a as A}from"./chunk-H3JE3PFU.js";import{d as M,e as k}from"./chunk-VY2MS4WZ.js";import"./chunk-ZVBRR6AA.js";import{a as L,b as R}from"./chunk-BOTK6AKQ.js";import"./chunk-LYNREAIS.js";import"./chunk-74PP5OHW.js";import"./chunk-Q64FFBLU.js";import"./chunk-PZDGU76M.js";import{d as h}from"./chunk-6RETXR6U.js";import{m as F}from"./chunk-T5LH5EWW.js";import{Fb as I,Kb as t,Lb as n,Mb as p,Nb as g,Ob as u,Qb as N,Ub as S,Vb as y,_b as b,ec as r,fb as a,fc as E,gb as _,ja as x,lc as P,mc as T,na as U,vb as d,xa as f,ya as v,yb as l}from"./chunk-7ATWILSR.js";function ae(e,s){e&1&&(t(0,"div",40),r(1,"Username is required"),n())}function oe(e,s){if(e&1&&(t(0,"div",40),r(1,"Username must be at least "),t(2,"strong",41),r(3),n(),r(4," letters"),n()),e&2){let i=y().ngIf;a(3),E(i.getError("minlength").requiredLength)}}function le(e,s){e&1&&(t(0,"div",40),r(1,"Only "),t(2,"strong",42),r(3,"_"),n(),r(4," and "),t(5,"strong",42),r(6,"."),n(),r(7," is allowed"),n())}function se(e,s){if(e&1&&(g(0),d(1,ae,2,0,"div",39)(2,oe,5,1,"div",39)(3,le,8,0,"div",39),u()),e&2){let i=s.ngIf;a(),l("ngIf",i.dirty&&i.hasError("required")),a(),l("ngIf",i.dirty&&i.hasError("minlength")),a(),l("ngIf",i.dirty&&i.hasError("pattern"))}}function pe(e,s){e&1&&(t(0,"div",40),r(1,"Age is requird"),n())}function me(e,s){e&1&&(t(0,"div",40),r(1,"Don't type letters"),n())}function de(e,s){if(e&1&&(t(0,"div",40),r(1,"Must be "),t(2,"strong"),r(3),n(),r(4," digits"),n()),e&2){let i=y().ngIf;a(3),E(i.getError("minlength").requiredLength)}}function ce(e,s){if(e&1&&(g(0),d(1,pe,2,0,"div",39)(2,me,2,0,"div",39)(3,de,5,1,"div",39),u()),e&2){let i=s.ngIf;a(),l("ngIf",i.dirty&&i.hasError("required")),a(),l("ngIf",i.dirty&&i.hasError("pattern")),a(),l("ngIf",i.dirty&&i.hasError("minlength"))}}function ge(e,s){e&1&&(t(0,"div",40),r(1,"Password is required"),n())}function ue(e,s){e&1&&(t(0,"div",44),r(1,"At least 8 characters, using uppercase, lowercase, number nad symbol"),n())}function fe(e,s){if(e&1&&(g(0),d(1,ge,2,0,"div",39)(2,ue,2,0,"div",43),u()),e&2){let i=s.ngIf;a(),l("ngIf",i.dirty&&i.hasError("required")),a(),l("ngIf",i.dirty&&i.hasError("pattern"))}}function ve(e,s){e&1&&(t(0,"div",40),r(1,"Password should match"),n())}function _e(e,s){if(e&1&&(g(0),d(1,ve,2,0,"div",39),u()),e&2){let i=s.ngIf;a(),l("ngIf",i.dirty&&i.hasError("passwordShouldMatch"))}}function Se(e,s){e&1&&(t(0,"div",38),p(1,"i",45),n())}var Le=(()=>{class e{constructor(i,c,o){this.message=i,this.fb=c,this.fbNotNull=o,this._api=x(j),this.togglePass=!1,this.env=A,this.router=x(M),this.loading=!1,this.newUser=this.fbNotNull.group({username:["",[m.required,m.minLength(2),m.pattern(/^[\w.]+$/)]],age:["",[m.required,m.minLength(2),m.pattern(/^[0-9]+$/)]],gender:["male",m.required],password:this.fbNotNull.group({newPassword:["",[m.required,m.minLength(8),m.pattern(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/)]],repeatNewPassword:""},{validators:[ee]}),recaptcha:[null,[m.required]]})}register(){this.loading=!0,this.sub=this._api.registerUser(this.newUser.value).subscribe({next:i=>{this.loading=!1,this.message.add({severity:"success",summary:"Registered",detail:"Enjoy shopping",life:3e3}),i.token&&(localStorage.setItem("token",i.token),setTimeout(()=>this.router.navigate(["projects/e-commerce/products"]),1e3))},error:()=>{this.loading=!1,this.message.add({severity:"error",summary:"Attempt failed",detail:"Please try again",life:3e3})}})}showPassword(){this.togglePass=!this.togglePass}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}static{this.\u0275fac=function(c){return new(c||e)(_(h),_(J),_(Q))}}static{this.\u0275cmp=U({type:e,selectors:[["app-sign-up"]],standalone:!0,features:[P([h]),T],decls:55,vars:16,consts:[["password",""],["repeat",""],[1,"w-full","h-full","flex","flex-col","items-center","justify-center","pb-28","lg:pb-0"],["position","top-center"],["autocomplete","off",1,"bg-basic-1100","flex","flex-col","shadow-3","rounded-lg","gap-2","w-80","max-w-80","p-5",3,"ngSubmit","formGroup"],[1,"mb-10","text-center"],[1,"flex","flex-col","gap-1","relative","mb-12","inputWrapper"],["type","text","name","username","placeholder"," ","autocomplete","off","value","","id","username","formControlName","username",1,"inputField"],["for","username",1,"inputLabel"],[1,"pi","pi-user","mr-1","text-lg"],[4,"ngIf"],[1,"flex","gap-2"],[1,"flex","flex-col","gap-1","w-1/2","relative","mb-12","inputWrapper"],["formControlName","age","type","text","placeholder"," ","name","age","autocomplete","new-password","value","","formControlName","age",1,"inputField"],["for","age",1,"inputLabel"],[1,"pi","pi-calendar-times","mr-1","text-lg"],[1,"flex","flex-col","gap-1","w-1/2","relative","inputWrapper"],["formControlName","gender","name","gender","id","gender",1,"inputSelect"],["value","male"],["value","female"],["for","gender",1,"absolute","-top-5","text-basic-500"],[1,"pi","pi-mars","mr-1","text-lg"],["formGroupName","password",1,"w-full","mb-7","self-center","border-2","border-basic-900","rounded-2xl","flex","flex-col","p-5","justify-center","gap-5"],[1,"p-2"],[1,"pi","pi-lock","mr-1","text-lg"],[1,"relative","flex","flex-col","gap-1","mb-14","inputWrapper"],["name","newPassword","autocomplete","off","placeholder"," ","value","","formControlName","newPassword",1,"inputField","mt-2",3,"type"],["for","newPassword",1,"inputLabel"],[1,"absolute","top-3","right-3","cursor-pointer","z-10",3,"click","src"],[1,"relative","flex","flex-col","gap-1","mb-5","inputWrapper"],["formControlName","repeatNewPassword","name","repeatPassword","placeholder"," ","autocomplete","off","value","","id","repeatPassword",1,"inputField",3,"type"],["for","repeatPassword",1,"inputLabel"],[1,"absolute","top-1","right-3","cursor-pointer","z-10",3,"click","src"],[1,"recaptchaContainer","ml-9"],["id","recaptcha","type","image","formControlName","recaptcha","size","normal","theme","dark",3,"siteKey"],["type","submit",1,"btn-primary","mb-3","disabled:btn-primary-disabled",3,"disabled"],[1,"text-center"],["routerLink","../login",1,"text-primary-500","underline"],[1,"loading"],["class","inputError",4,"ngIf"],[1,"inputError"],[1,"underline"],[1,"text-xl"],["class","inputError top-12 leading-none",4,"ngIf"],[1,"inputError","top-12","leading-none"],[1,"pi","pi-spin","pi-spinner","text-4xl"]],template:function(c,o){if(c&1){let w=N();t(0,"div",2),p(1,"p-toast",3),t(2,"form",4),S("ngSubmit",function(){return f(w),v(o.register())}),t(3,"h2",5),r(4,"Sign Up"),n(),t(5,"div",6),p(6,"input",7),t(7,"label",8),p(8,"i",9),r(9,"Username"),n(),d(10,se,4,3,"ng-container",10),n(),t(11,"div",11)(12,"div",12),p(13,"input",13),t(14,"label",14),p(15,"i",15),r(16,"Age"),n(),d(17,ce,4,3,"ng-container",10),n(),t(18,"div",16)(19,"select",17)(20,"option",18),r(21,"Male"),n(),t(22,"option",19),r(23,"Female"),n()(),t(24,"label",20),p(25,"i",21),r(26,"Gender"),n()()(),t(27,"fieldset",22)(28,"legend",23),p(29,"i",24),r(30,"Password"),n(),t(31,"div",25),p(32,"input",26,0),t(34,"label",27),r(35,"Password"),n(),t(36,"svg-icon",28),S("click",function(){return f(w),v(o.showPassword())}),n(),d(37,fe,3,2,"ng-container",10),n(),t(38,"div",29),p(39,"input",30,1),t(41,"label",31),r(42,"Repeat Password"),n(),d(43,_e,2,1,"ng-container",10),t(44,"svg-icon",32),S("click",function(){return f(w),v(o.showPassword())}),n()()(),t(45,"div",33),p(46,"re-captcha",34),n(),t(47,"button",35)(48,"h4"),r(49,"Sign Up"),n()(),t(50,"p",36),r(51,"Already have an account? "),t(52,"a",37),r(53,"Sign in"),n()()()(),d(54,Se,2,0,"div",38)}c&2&&(a(2),l("formGroup",o.newUser),a(8),l("ngIf",o.newUser.controls.username),a(7),l("ngIf",o.newUser.controls.age),a(15),l("type",o.togglePass?"text":"password"),a(4),b("src","",o.env.staticFileUrl,"/svg/eye-",o.togglePass.toString(),".svg"),a(),l("ngIf",o.newUser.controls.password.controls.newPassword),a(2),l("type",o.togglePass?"text":"password"),a(4),l("ngIf",o.newUser.controls.password.controls.repeatNewPassword),a(),b("src","",o.env.staticFileUrl,"/svg/eye-",o.togglePass.toString(),".svg"),a(2),l("siteKey",o.env.recaptcha.sitekey),a(),l("disabled",o.newUser.invalid),a(7),I(o.loading?54:-1))},dependencies:[X,W,Z,H,D,K,G,z,k,Y,$,B,O,R,L,V,q,F,re,ne,ie,te]})}}return e})();export{Le as SignUpComponent};
