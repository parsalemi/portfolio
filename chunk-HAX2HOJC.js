import{b as O,c as H,d as J,e as Q}from"./chunk-TRWJ6ULH.js";import{a as D}from"./chunk-RI74FA6F.js";import{b as R,c,e as j,f as A,i as G,k as L,m as z,q as K,s as W,t as B}from"./chunk-C6TDYET4.js";import{a as M,b as V}from"./chunk-AGWVRW6Z.js";import{a as N}from"./chunk-H3JE3PFU.js";import{d as k,e as P}from"./chunk-VY2MS4WZ.js";import"./chunk-ZVBRR6AA.js";import{a as T,b as q}from"./chunk-BOTK6AKQ.js";import"./chunk-LYNREAIS.js";import"./chunk-74PP5OHW.js";import"./chunk-Q64FFBLU.js";import"./chunk-PZDGU76M.js";import{d}from"./chunk-6RETXR6U.js";import{m as F}from"./chunk-T5LH5EWW.js";import{Fb as w,Kb as e,Lb as i,Mb as s,Qb as b,Ub as _,Vb as I,_b as x,dc as C,ec as a,fb as o,gb as S,ja as f,lc as E,mc as U,na as y,vb as p,xa as v,ya as h,yb as m}from"./chunk-7ATWILSR.js";function X(t,u){t&1&&(e(0,"div",20),a(1,"Username is required"),i())}function Y(t,u){if(t&1){let n=b();e(0,"svg-icon",21),_("click",function(){v(n);let r=I();return h(r.showPassword())}),i()}if(t&2){let n=I();x("src","",n.env.staticFileUrl,"/svg/eye-",n.togglePassword.toString(),".svg")}}function Z(t,u){t&1&&(e(0,"div",20),a(1,"Password is required"),i())}function $(t,u){t&1&&(e(0,"div",19),s(1,"i",22),i())}var Se=(()=>{class t{constructor(n,l){this.message=n,this.fb=l,this.togglePassword=!1,this.env=N,this._api=f(D),this.router=f(k),this.loading=!1,this.signInUser=this.fb.group({username:["",[c.required]],password:["",[c.required]],recaptcha:[null,[c.required]]})}signIn(){this.loading=!0,this.sub=this._api.signInUser(this.signInUser.value).subscribe({next:n=>{this.loading=!1,n.token&&(localStorage.setItem("token",n.token),this.router.navigate(["projects/e-commerce/products"]))},error:()=>{this.loading=!1,this.message.add({severity:"error",summary:"Attempt failed",detail:"Please try again",life:3e3})}})}showPassword(){this.togglePassword=!this.togglePassword}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}static{this.\u0275fac=function(l){return new(l||t)(S(d),S(K))}}static{this.\u0275cmp=y({type:t,selectors:[["app-sign-in"]],standalone:!0,features:[E([d]),U],decls:29,vars:8,consts:[["password",""],[1,"w-full","h-full","flex","flex-col","items-center","justify-center"],["position","top-center"],["autocomplete","off",1,"bg-basic-1100","flex","flex-col","shadow-3","rounded-lg","gap-1","w-64","p-5","max-w-64",3,"ngSubmit","formGroup"],[1,"text-center","mb-10"],[1,"flex","flex-col","gap-1","relative","mb-12","inputWrapper"],["type","text","placeholder"," ","autocomplete","off","name","username","formControlName","username","value","","id","username",1,"inputField","login"],["for","username",1,"inputLabel"],[1,"pi","pi-user","mr-1","text-lg"],["class","inputError",4,"ngIf"],[1,"flex","flex-col","gap-1","relative","mb-5","inputWrapper"],["autocomplete","new-password","placeholder"," ","id","password","name","password","formControlName","password","value","",1,"inputField","login",3,"type"],["for","password",1,"inputLabel"],[1,"pi","pi-lock","mr-1","text-lg"],[1,"absolute","top-1","right-3","cursor-pointer","z-10",3,"src"],[1,"recaptchaContainer"],["id","recaptcha","type","image","name","captcha","formControlName","recaptcha","size","normal","theme","dark",3,"siteKey"],["type","submit",1,"btn-primary","mb-3","-mt-2","disabled:btn-primary-disabled",3,"disabled"],["routerLink","../register",1,"text-primary-500","underline"],[1,"loading"],[1,"inputError"],[1,"absolute","top-1","right-3","cursor-pointer","z-10",3,"click","src"],[1,"pi","pi-spin","pi-spinner","text-4xl"]],template:function(l,r){if(l&1){let g=b();e(0,"div",1),s(1,"p-toast",2),e(2,"form",3),_("ngSubmit",function(){return v(g),h(r.signIn())}),e(3,"h1",4),a(4,"Sign In"),i(),e(5,"div",5),s(6,"input",6),e(7,"label",7),s(8,"i",8),a(9,"Username"),i(),p(10,X,2,0,"div",9),i(),e(11,"div",10),s(12,"input",11,0),e(14,"label",12),s(15,"i",13),a(16,"Password"),i(),p(17,Y,1,3,"svg-icon",14)(18,Z,2,0,"div",9),i(),e(19,"div",15),s(20,"re-captcha",16),i(),e(21,"button",17)(22,"h4"),a(23,"Sign In"),i()(),e(24,"p"),a(25,"Don't have an account? "),e(26,"a",18),a(27,"Sign up"),i()()()(),p(28,$,2,0,"div",19)}if(l&2){let g=C(13);o(2),m("formGroup",r.signInUser),o(8),m("ngIf",r.signInUser.controls.username.dirty&&r.signInUser.controls.username.hasError("required")),o(2),m("type",r.togglePassword?"text":"password"),o(5),w(g.value?17:-1),o(),m("ngIf",r.signInUser.controls.password.dirty&&r.signInUser.controls.password.hasError("required")),o(2),m("siteKey",r.env.recaptcha.sitekey),o(),m("disabled",r.signInUser.invalid),o(7),w(r.loading?28:-1)}},dependencies:[W,G,R,j,A,B,L,z,P,q,T,V,M,F,H,O,Q,J]})}}return t})();export{Se as SignInComponent};
